'use strict';

const TABLE_SUGGESTIONS = 'discovery_suggestions';
const TABLE_TOPICS = 'discovery_trending_topics';
const TABLE_CONNECTIONS = 'discovery_connection_profiles';

function iso(date) {
  return date.toISOString();
}

module.exports = {
  async up(queryInterface) {
    const now = new Date();

    const suggestions = [
      {
        type: 'program',
        title: 'Experience Launchpad Cohort 06',
        subtitle: 'Sprint your product-market fit narrative with enterprise mentors.',
        description:
          'A 6-week executive coaching track pairing founders and product leaders to pressure-test launch plans, pilot messaging, and investor readiness with cross-discipline mentors.',
        avatarUrl: 'https://cdn.gigvora.com/avatars/launchpad-cohort-06.png',
        reason: 'You saved two Launchpad decks and collaborate with alumni teams.',
        personalizationScore: 92.3,
        mutualConnections: 5,
        pinned: true,
        shareUrl: 'https://gigvora.com/experience-launchpad',
        href: '/launchpads/experience-cohort-06',
        contextTags: ['Experience Launchpad', 'Product strategy', 'Executive coaching'],
        statSnapshot: [
          { id: 'mentors', label: 'Mentors confirmed', value: '18', delta: '+4 this week' },
          { id: 'spots', label: 'Spots remaining', value: '6', delta: 'Closes in 5 days' },
        ],
        primaryActionLabel: 'Review cohort brief',
        targetPersona: 'founder',
        targetSegments: ['launchpad', 'product_leader'],
        sortOrder: 1,
        followCount: 56,
        saveCount: 34,
        viewCount: 412,
        shareCount: 27,
        dismissCount: 3,
        metadata: {
          personalizationSummary: 'Prioritised because you follow Launchpad updates and recently met with two alumni mentors.',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        type: 'opportunity',
        title: 'Nova Labs · Fractional Head of Product',
        subtitle: '12-week engagement · Remote within EU',
        description:
          'Drive activation and retention experiments for Nova Labs’ platform relaunch. Collaborate with embedded growth, research, and content guilds to stand up a durable product ops cadence.',
        avatarUrl: 'https://cdn.gigvora.com/companies/nova-labs.png',
        reason: 'Matches your growth experimentation expertise and two mutual advisors.',
        personalizationScore: 87.6,
        mutualConnections: 3,
        shareUrl: 'https://gigvora.com/opportunities/nova-labs-head-of-product',
        href: '/opportunities/jobs/nova-labs-head-of-product',
        contextTags: ['Growth leadership', 'Marketplace', 'Product ops'],
        statSnapshot: [
          { id: 'budget', label: 'Budget', value: '£165k', delta: 'Paid quarterly' },
          { id: 'interest', label: 'Active shortlist', value: '9 teams', delta: '+2 today' },
        ],
        primaryActionLabel: 'Open brief',
        targetPersona: 'freelancer',
        targetSegments: ['growth_marketer', 'product_leader'],
        sortOrder: 2,
        followCount: 73,
        saveCount: 49,
        viewCount: 628,
        shareCount: 41,
        dismissCount: 6,
        metadata: {
          personalizationSummary: 'Recommended because you lead two product-market fit retros and maintain a 90% renewal rate.',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        type: 'group',
        title: 'Experience Launchpad Alumni Guild',
        subtitle: 'Peer mastermind for alumni operators shipping new ventures.',
        description:
          'Weekly salons, curated partner intros, and access to invite-only deal rooms for Experience Launchpad alumni shipping new ventures.',
        avatarUrl: 'https://cdn.gigvora.com/groups/launchpad-alumni.png',
        reason: 'Your team participates in Launchpad retros and mentors two alumni squads.',
        personalizationScore: 81.2,
        mutualConnections: 8,
        shareUrl: 'https://gigvora.com/groups/launchpad-alumni',
        href: '/groups/experience-launchpad-alumni',
        contextTags: ['Community', 'Founder support', 'Peer mastermind'],
        statSnapshot: [
          { id: 'members', label: 'Members', value: '1.2k', delta: '+46 this month' },
          { id: 'sessions', label: 'Live sessions', value: '3 / week', delta: 'Morning & EU friendly' },
        ],
        primaryActionLabel: 'Request invite',
        targetPersona: 'founder',
        targetSegments: ['community_builder'],
        sortOrder: 3,
        followCount: 62,
        saveCount: 28,
        viewCount: 501,
        shareCount: 22,
        dismissCount: 4,
        metadata: {
          personalizationSummary: 'Tailored because you co-host Launchpad retros and bookmarked alumni demo day decks.',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        type: 'resource',
        title: 'Mentor Playbook · Building Trust at Enterprise Scale',
        subtitle: 'New 38-page guide from Atlas Studio mentors.',
        description:
          'The Atlas Studio mentor collective published their trust-building playbook, covering enterprise stakeholder rituals, executive communication rhythms, and escalation management templates.',
        avatarUrl: 'https://cdn.gigvora.com/resources/mentor-playbook.png',
        reason: 'You collaborate with Atlas Studio mentors and requested enterprise onboarding guidance.',
        personalizationScore: 79.4,
        mutualConnections: 4,
        shareUrl: 'https://gigvora.com/resources/atlas-mentor-playbook',
        href: '/resources/atlas-mentor-playbook',
        contextTags: ['Enterprise rituals', 'Mentor wisdom', 'Trust building'],
        statSnapshot: [
          { id: 'downloads', label: 'Downloads', value: '940', delta: '+120 today' },
          { id: 'rating', label: 'Rating', value: '4.8 / 5', delta: 'Mentor council review' },
        ],
        primaryActionLabel: 'Download playbook',
        targetPersona: 'agency',
        targetSegments: ['enterprise_programmes'],
        sortOrder: 4,
        followCount: 44,
        saveCount: 51,
        viewCount: 712,
        shareCount: 36,
        dismissCount: 2,
        metadata: {
          personalizationSummary: 'Highlighted because you facilitate enterprise onboarding and saved two mentor process guides.',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        type: 'person',
        title: 'Ava Chen · Nova Labs Product Marketing Lead',
        subtitle: 'Hosts Launchpad go-to-market salons and led two shared pilots.',
        description:
          'Ava steered Nova Labs’ growth pods and currently mentors Experience Launchpad cohorts. She is scouting co-creators for the Q1 partner sprint.',
        avatarUrl: 'https://cdn.gigvora.com/profiles/ava-chen.png',
        reason: '3 mutual mentors + recently co-hosted the growth narrative clinic.',
        personalizationScore: 84.1,
        mutualConnections: 6,
        shareUrl: 'https://gigvora.com/network/ava-chen',
        href: '/connections/ava-chen',
        contextTags: ['Growth marketing', 'Launchpad mentor', 'Narrative design'],
        statSnapshot: [
          { id: 'followers', label: 'Followers', value: '4.3k', delta: '+180 this week' },
          { id: 'response', label: 'Reply rate', value: '92%', delta: 'Last 30 days' },
        ],
        primaryActionLabel: 'Send intro',
        targetPersona: 'freelancer',
        targetSegments: ['mentor_collaboration'],
        sortOrder: 5,
        followCount: 88,
        saveCount: 47,
        viewCount: 905,
        shareCount: 54,
        dismissCount: 5,
        metadata: {
          personalizationSummary: 'Recommended because you co-led the growth clinic Ava facilitated last quarter.',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        type: 'program',
        title: 'Community Builders Discovery Sprint',
        subtitle: '4-week accelerator for designing community-led acquisition loops.',
        description:
          'Design, test, and operationalise community-led acquisition loops with Gigvora strategists, Atlas Studio mentors, and peer founders working on network effects.',
        avatarUrl: 'https://cdn.gigvora.com/programmes/community-discovery.png',
        reason: 'Because you facilitate community programmes and bookmarked ecosystem case studies.',
        personalizationScore: 83.9,
        mutualConnections: 7,
        shareUrl: 'https://gigvora.com/programmes/community-discovery',
        href: '/programmes/community-discovery-sprint',
        contextTags: ['Community design', 'Acquisition loops', 'Peer mastermind'],
        statSnapshot: [
          { id: 'teams', label: 'Teams enrolled', value: '24', delta: '+6 this cycle' },
          { id: 'nps', label: 'Participant NPS', value: '67', delta: 'Top quartile' },
        ],
        primaryActionLabel: 'View syllabus',
        targetPersona: 'community',
        targetSegments: ['community_builder', 'growth_marketer'],
        sortOrder: 6,
        followCount: 51,
        saveCount: 37,
        viewCount: 588,
        shareCount: 31,
        dismissCount: 3,
        metadata: {
          personalizationSummary: 'Suggested because you mentor community builders and saved two acquisition loop templates.',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
    ];

    const topics = [
      {
        topic: 'AI-powered portfolio diagnostics',
        summary: 'Operators are co-building diagnostic canvases that turn readiness scans into launchpad invites.',
        category: 'Launchpad',
        timeframe: '7d',
        persona: 'founder',
        icon: '🤖',
        accentColor: '#6366f1',
        rank: 1,
        engagementScore: 94.2,
        growthRate: 18.4,
        mentionCount: 382,
        shareCount: 146,
        followCount: 212,
        sentimentScore: 4.6,
        metrics: {
          follows: 212,
          shares: 146,
          conversations: 58,
          industries: ['AI acceleration', 'Portfolio strategy', 'Executive enablement'],
          momentum: 92,
          audience: 'Founders & venture partners',
          confidenceLabel: 'High signal',
          geoFocus: 'Global',
        },
        metadata: {
          timeframeLabel: 'Past week momentum',
          href: '/insights/ai-portfolio-diagnostics',
          shareUrl: 'https://gigvora.com/insights/ai-portfolio-diagnostics',
          isNew: true,
          audience: 'Founders & venture partners',
          momentum: 92,
          confidence: 'High signal',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        topic: 'Fractional GTM councils',
        summary: 'Revenue leaders are forming cross-company councils to peer-review GTM experiments in real time.',
        category: 'Growth',
        timeframe: '7d',
        persona: 'freelancer',
        icon: '📈',
        accentColor: '#0ea5e9',
        rank: 2,
        engagementScore: 89.7,
        growthRate: 14.1,
        mentionCount: 244,
        shareCount: 103,
        followCount: 187,
        sentimentScore: 4.4,
        metrics: {
          follows: 187,
          invites: 36,
          workshops: 11,
          industries: ['Revenue leadership', 'Fractional operators'],
          momentum: 88,
          audience: 'Growth leads & advisors',
          confidenceLabel: 'Confident',
          geoFocus: 'North America & EU',
        },
        metadata: {
          callToAction: 'Spin up a council via Connection Concierge.',
          href: '/insights/fractional-gtm-councils',
          shareUrl: 'https://gigvora.com/insights/fractional-gtm-councils',
          audience: 'Growth leads & advisors',
          momentum: 88,
          confidence: 'Confident',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        topic: 'Community-to-customer pipelines',
        summary: 'Community operators are pairing CRM signals with group rituals to convert superfans into pilots.',
        category: 'Community',
        timeframe: '30d',
        persona: 'community',
        icon: '🪄',
        accentColor: '#10b981',
        rank: 3,
        engagementScore: 83.5,
        growthRate: 11.2,
        mentionCount: 198,
        shareCount: 92,
        followCount: 156,
        sentimentScore: 4.5,
        metrics: {
          playbooks: 21,
          pilots: 17,
          conversions: 44,
          industries: ['Community', 'Customer success'],
          momentum: 84,
          audience: 'Community leads & lifecycle marketers',
          confidenceLabel: 'Steady',
          geoFocus: 'Global',
        },
        metadata: {
          highlight: 'Launchpad alumni recorded a 28% faster pilot cycle.',
          href: '/insights/community-to-customer-pipelines',
          shareUrl: 'https://gigvora.com/insights/community-to-customer-pipelines',
          audience: 'Community leads & lifecycle marketers',
          momentum: 84,
          confidence: 'Steady',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        topic: 'Mentor marketplaces for ops leaders',
        summary: 'Ops leaders are co-hosting mentor marketplaces to accelerate process audits and onboarding.',
        category: 'Operations',
        timeframe: '24h',
        persona: 'agency',
        icon: '🧭',
        accentColor: '#f97316',
        rank: 4,
        engagementScore: 78.9,
        growthRate: 9.8,
        mentionCount: 122,
        shareCount: 64,
        followCount: 118,
        sentimentScore: 4.2,
        metrics: {
          mentors: 48,
          sessions: 32,
          outcomes: 19,
          industries: ['Operations', 'Mentoring'],
          momentum: 79,
          audience: 'Agency ops leaders',
          confidenceLabel: 'Emerging',
          geoFocus: 'EMEA',
        },
        metadata: {
          cadence: 'Daily recap published by Mentor Council.',
          href: '/insights/mentor-marketplaces-ops',
          shareUrl: 'https://gigvora.com/insights/mentor-marketplaces-ops',
          isNew: true,
          audience: 'Agency ops leaders',
          momentum: 79,
          confidence: 'Emerging',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        topic: 'Embedded partner pods',
        summary: 'Founders are embedding partner pods into product squads to co-own enterprise proof-of-value cycles.',
        category: 'Partnerships',
        timeframe: '7d',
        persona: 'founder',
        icon: '🤝',
        accentColor: '#facc15',
        rank: 5,
        engagementScore: 76.4,
        growthRate: 8.7,
        mentionCount: 164,
        shareCount: 58,
        followCount: 133,
        sentimentScore: 4.3,
        metrics: {
          partnerPitches: 27,
          coSellDeals: 14,
          playbooks: 9,
          industries: ['Partnerships', 'Enterprise'],
          momentum: 74,
          audience: 'Founders & partner leads',
          confidenceLabel: 'Calibrating',
          geoFocus: 'Global',
        },
        metadata: {
          guide: 'Download the embedded partner pod charter template.',
          href: '/insights/embedded-partner-pods',
          shareUrl: 'https://gigvora.com/insights/embedded-partner-pods',
          audience: 'Founders & partner leads',
          momentum: 74,
          confidence: 'Calibrating',
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
    ];

    const connectionProfiles = [
      {
        fullName: 'Mateo Ruiz',
        headline: 'Innovation Lead · Aurora Labs',
        location: 'Lisbon, Portugal',
        bio: 'Leads Aurora Labs’ innovation guild, mentoring Launchpad squads and embedding venture studios into product teams.',
        avatarUrl: 'https://cdn.gigvora.com/profiles/mateo-ruiz.png',
        verified: true,
        trustSignal: 'Launchpad mentor',
        sharedContexts: ['Launchpad Cohort 05', 'Aurora Labs partner circle'],
        tags: ['Innovation strategy', 'AI go-to-market', 'Partner enablement'],
        successStory: 'Mentored two Launchpad founders through 0→1 activation, unlocking £1.2M ARR in six months.',
        primaryAction: { intent: 'connect', label: 'Request intro' },
        secondaryAction: { intent: 'save', label: 'Save profile' },
        persona: 'founder',
        industryFocus: 'Innovation',
        relationshipStatus: 'new',
        priorityScore: 92.1,
        pronouns: 'he/him',
        matchScore: 91.4,
        responseTimeLabel: 'Replies within 4 hours',
        availabilityWindow: 'Accepting Q2 pilot collaborations',
        focusAreas: ['Innovation sprints', 'Mentor pods', 'AI adoption'],
        metadata: {
          mutualConnections: 7,
          lastCollaborated: '4 weeks ago',
          sharedCommunities: ['Launchpad mentors', 'AI collaboration crafters'],
          focusAreas: ['Innovation sprints', 'Mentor pods', 'AI adoption'],
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        fullName: 'Leila Odum',
        headline: 'Talent Partner · Northwind Ventures',
        location: 'Copenhagen, Denmark',
        bio: 'Leads Northwind’s talent partner programmes, sourcing fractional execs and co-designing community-led hiring rituals.',
        avatarUrl: 'https://cdn.gigvora.com/profiles/leila-odum.png',
        verified: true,
        trustSignal: 'Venture partner',
        sharedContexts: ['Community Builders Sprint', 'Northwind Ventures'],
        tags: ['Talent strategy', 'Community-led hiring', 'Launch partnerships'],
        successStory: 'Spun up a partner pod that converted three pilot communities into retained customers.',
        primaryAction: { intent: 'connect', label: 'Warm intro' },
        secondaryAction: { intent: 'message', label: 'Message' },
        persona: 'agency',
        industryFocus: 'Venture',
        relationshipStatus: 'pending',
        priorityScore: 87.6,
        pronouns: 'she/her',
        matchScore: 88.9,
        responseTimeLabel: 'Responds same day',
        availabilityWindow: 'Onboarding new partner pods this month',
        focusAreas: ['Talent partnerships', 'Community-led hiring', 'Venture ecosystems'],
        metadata: {
          mutualConnections: 5,
          lastCollaborated: '2 weeks ago',
          sharedCommunities: ['Community growth syndicate'],
          focusAreas: ['Talent partnerships', 'Community-led hiring'],
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
      {
        fullName: 'Dario Fernández',
        headline: 'Head of Product · Signal Eight',
        location: 'Barcelona, Spain',
        bio: 'Shipping AI-first workplace analytics. Hosts Lisbon innovation circles and co-leads Launchpad retrospectives.',
        avatarUrl: 'https://cdn.gigvora.com/profiles/dario-fernandez.png',
        verified: false,
        trustSignal: 'Shared pilot',
        sharedContexts: ['Lisbon innovation circle', 'Signal Eight x Launchpad pilot'],
        tags: ['AI analytics', 'Innovation circles', 'Product leadership'],
        successStory: 'Partnered with Gigvora founders to deliver an AI pilot that boosted activation by 22%.',
        primaryAction: { intent: 'connect', label: 'Book intro call' },
        secondaryAction: { intent: 'save', label: 'Save for later' },
        persona: 'freelancer',
        industryFocus: 'Product',
        relationshipStatus: 'new',
        priorityScore: 85.4,
        pronouns: 'he/they',
        matchScore: 86.2,
        responseTimeLabel: 'Typically within 6 hours',
        availabilityWindow: 'Scheduling strategy clinics for May',
        focusAreas: ['AI analytics', 'Innovation circles', 'Product leadership'],
        metadata: {
          mutualConnections: 6,
          lastCollaborated: '3 months ago',
          sharedCommunities: ['Innovation circle'],
          focusAreas: ['AI analytics', 'Innovation circles'],
        },
        createdAt: iso(now),
        updatedAt: iso(now),
      },
    ];

    await queryInterface.bulkInsert(TABLE_SUGGESTIONS, suggestions);
    await queryInterface.bulkInsert(TABLE_TOPICS, topics);
    await queryInterface.bulkInsert(TABLE_CONNECTIONS, connectionProfiles);
  },

  async down(queryInterface) {
    await queryInterface.bulkDelete(TABLE_CONNECTIONS, null, {});
    await queryInterface.bulkDelete(TABLE_TOPICS, null, {});
    await queryInterface.bulkDelete(TABLE_SUGGESTIONS, null, {});
  },
};
