# Routes Updates â€” Version 1.50 Update

| Route | Change | Notes |
|-------|--------|-------|
| `GET /health/live` | **New.** Returns liveness payload for container orchestrators; excludes heavy dependency checks so it can be polled at high frequency. | Backed by `services/healthService.getLivenessReport()` and the runtime health tracker. |
| `GET /health/ready` | **New.** Surfaces dependency-aware readiness, including Sequelize connectivity and worker states. Emits `503` when degraded or during shutdown. | Consumers should migrate from legacy `/health` to this path for granular telemetry. |
| `GET /health` | Updated. Now proxies to `/health/ready` to preserve compatibility while delivering enriched telemetry. | Documented for load balancers and mobile clients. |
| `GET /api/admin/runtime/health` | **New.** Returns aggregated readiness, liveness, dependency, maintenance, and rate-limit telemetry for admin operators. | Feeds the refreshed admin dashboard runtime panel and future automation hooks, including downtime copy surfaced to mobile. |
| `POST /auth/refresh` | **New.** Issues a fresh access token and session payload when presented with a valid refresh token. | Powers secure mobile/web session bootstrap without requiring repeated credential entry; audited via `refresh_token_issued` login events. |
| `GET /api/domains/registry` | **New.** Provides a registry snapshot of bounded contexts, associated services, and sampled model attributes. | Designed for admin dashboards and tooling to verify coverage before migrations. |
| `GET /api/domains/:context` | **New.** Returns context metadata plus serialised model definitions (attributes, indexes, hooks, associations). | Supports engineering review of schema churn and contract drift. |
| `GET /api/domains/:context/models/:modelName` | **New.** Serves a specific model definition pulled from the bounded context. | Enables targeted schema validation in CI and documentation pipelines. |
| `POST /api/auth/*` | Updated. Requests now pass through Zod schemas that trim names, coerce booleans/numbers, and reject malformed payloads before controller logic runs. | Applies to registration, login, two-factor verification/resend, and Google OAuth entry points. |
| `GET /api/admin/dashboard` | Updated. Query params (`lookbackDays`, `eventWindowDays`) are parsed as bounded integers and defaulted safely when omitted. | Prevents negative/NaN values from reaching the dashboard service. |
| `PUT /api/admin/platform-settings` | Updated. Nested commission/payment/smtp structures are validated, with numeric and boolean coercion before persisting settings. | Blocks prototype pollution and invalid provider payloads. |
| `PUT /api/admin/affiliate-settings` | Updated. Tiers, payouts, and compliance settings are normalised through schemas enforcing ranges, strings, and recurrence contracts. | Guards affiliate configuration against missing names, out-of-range rates, and invalid recurrence windows. |
| `GET /api/search` | Updated. Enforces bounded numeric limits and trims search queries before delegating to discovery snapshots or Meilisearch. | Prevents excessive page sizes and empty queries from reaching the discovery service. |
| `GET /api/search/opportunities` | Updated. Canonicalises category aliases, validates JSON filters/viewports, coerces pagination, and respects boolean facet toggles through validation middleware. | Shields discovery services from malformed filters, invalid bounding boxes, and unsafe query strings. |
| `POST /api/search/subscriptions` | Updated. Requires trimmed names, canonical categories, validated filters, and boolean preferences before creating saved searches. | Blocks malformed subscription payloads and normalises defaults for notification channels and frequency. |
| `PATCH /api/search/subscriptions/:id` | Updated. Ensures numeric IDs, trims optional fields, validates frequency enums, and sanitises JSON filters on updates. | Prevents invalid identifiers and unsafe filter payloads from reaching the subscription service. |
| `DELETE /api/search/subscriptions/:id` | Updated. Validates numeric identifiers before attempting deletion. | Eliminates silent failures caused by malformed params. |
| `POST /api/projects` | Updated. Applies schema validation to require titles/descriptions, coerce actor IDs, normalise geo/budget payloads, and sanitise auto-assign settings. | Guarantees project creation flows receive production-ready payloads with consistent numeric/boolean types. |
| `PATCH /api/projects/:projectId` | Updated. Validates identifiers and trims/sanitises partial updates including budget currency, status, and nested auto-assign settings. | Prevents empty updates and enforces canonical status/currency formatting before persistence. |
| `PATCH /api/projects/:projectId/auto-assign` | Updated. Requires numeric project IDs, coerces actor IDs and budgets, and merges nested settings into a canonical auto-assign payload. | Stops queue regeneration with invalid limits/weights and ensures booleans are explicit. |
| `GET /api/projects/:projectId/events` | Updated. Validates project identifiers and bounds the events `limit` parameter to safe integers. | Avoids negative or non-numeric limits from hitting the events service. |
| `GET /api/finance/control-tower/overview` | Updated. Coerces user IDs, validates ISO date filters, and normalises refresh flags before computing the finance overview. | Prevents invalid dates and identifiers from bypassing the finance guardrails and cache keying. |
| `GET /api/finance/freelancers/:freelancerId/insights` | Updated. Validates freelancer identifiers as positive integers before fetching insights. | Stops invalid path parameters from triggering needless service lookups. |
