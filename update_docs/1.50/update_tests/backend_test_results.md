# Backend Test Results — Version 1.50 Update

| Date | Command | Result | Notes |
|------|---------|--------|-------|
| 01 May 2024 | `npm test -- --runTestsByPath tests/routes/consentRoutes.integration.test.js` | ✅ Pass | Exercised admin/user consent routes end-to-end, confirming policy publication, version activation, user grant/withdraw flows, and conflict handling for non-revocable policies with audit assertions. 【de76f0†L1-L20】 |
| 30 Apr 2024 | `npm test -- --runTestsByPath tests/services/rbacPolicyService.test.js tests/routes/adminRbacRoutes.test.js` | ✅ Pass | Exported `RuntimeSecurityAuditEvent` so admin RBAC suites load; confirmed matrix/audit/simulation flows persist audits and return typed payloads. 【c8eeba†L1-L8】 |
| 27 Apr 2024 | `npm test -- consentService` | ✅ Pass | Validated consent policy lifecycle orchestration, activation guardrails, and withdrawal conflicts. Suite exercises audit emission, SAR export helpers, and non-revocable safeguards; SQLite TEXT warnings persist as expected. |
| 25 Apr 2024 | `npm test -- routes/domainRoutes.governance` | ✅ Pass | Implemented `groupService.listMemberGroups`, guarded duplicate association wiring in `careerDocumentModels`, and adjusted domain registry errors so the governance HTTP suite now loads fixtures, returns 404 for unknown contexts, and completes successfully. 【36b0bd†L1-L7】 |
| 24 Apr 2024 | `npm test -- routes/domainRoutes.governance` | ❌ Fail | Suite aborts because Jest cannot resolve the optional `prom-client` dependency required by `metricsRegistry.js`; the missing module surfaces before the new Supertest assertions execute. 【e7061d†L1-L86】 |
| 23 Apr 2024 | `npm test` | ❌ Fail | Test run aborted by duplicate `ServiceUnavailableError` export in `src/utils/errors.js`; Jest cannot parse modules and halts before executing suites. Needs cleanup of legacy duplicate class before re-running. 【d126dc†L1-L120】 |
| 23 Apr 2024 | `npm run lint` | ❌ Fail | ESLint surfaces parse errors for the same duplicate `ServiceUnavailableError` export plus existing import-order warnings across legacy files. Requires consolidating error definitions before lint can complete. 【7c52fd†L1-L120】 |
| 19 Apr 2024 | `npm test -- routes/healthRoutes.metrics` | ⚠️ Pending | New Prometheus exporter suite added; execute after documentation sync so `/health/metrics` responses reflect primed exporter state before capturing artefacts. |
| 19 Apr 2024 | `npm test -- routes/complianceRoutes.validation` | ⚠️ Pending | Validation coverage introduced for compliance locker routes; run queued once schema updates propagate across CI to avoid false negatives from cached mocks. |
| 16 Apr 2024 | `npm test -- lifecycle/serverLifecycle` | ✅ Pass | Verified the shutdown orchestrator stops workers, logs audits, drains pools, and propagates drain failures with structured logging. 【25d083†L1-L9】 |
| 17 Apr 2024 | `npm test -- middleware/webApplicationFirewall` | ✅ Pass | Verified benign requests pass, SQL injection payloads are blocked, WAF metrics capture rule/IP stats, and security audits/logging fire. 【202903†L1-L9】 |
| 18 Apr 2024 | `npm test -- routes/securityPerimeter` | ✅ Pass | Exercised Express stack with auto-block enabled, confirming WAF runs before routing, admin JWT enforcement holds, and runtime telemetry surfaces active quarantines. 【182989†L1-L8】 |
| 14 Apr 2024 | `npm test -- docsRoutes` | ✅ Pass | Exercised the documentation endpoint; confirms OpenAPI payload caching and conditional requests, with Jest emitting post-teardown warnings while exiting 0. 【aa2da0†L1-L74】 |
| 13 Apr 2024 | `npm test -- databaseLifecycleService` | ✅ Pass | Exercised database lifecycle warm/drain orchestration, confirming audit events and pool telemetry snapshots are emitted as expected. 【0fd77f†L1-L9】 |
| 12 Apr 2024 | `npm test -- dependencyGuardRoutes` | ✅ Pass | Verified payments/compliance guard propagation for `/api/users/:id` and `/api/compliance/documents`; SQLite emitted the expected TEXT warning during forced sync. 【628fa1†L1-L24】 |
| 11 Apr 2024 | `npm test -- runtimeDependencyGuard` | ✅ Pass | Exercised payments/compliance dependency guards across credential gaps, maintenance degradations, and healthy states using SQLite-backed models. 【359896†L1-L9】 |
| 10 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose services/runtimeMaintenanceService` | ✅ Pass | Validated maintenance CRUD sanitisation, status transitions, and filtering logic with Sequelize mocks; chronology guardrails enforced. |
| 10 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose routes/runtimeRoutes` | ⚠️ Blocked | Test harness now loads stubs for Pino and rate limiter, but fails due to missing `zod` optional dependency in CI image; remediation tracked in dependency backlog. |
| 09 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose projectRoutes.validation financeRoutes.validation` | ✅ Pass | Validated project management and finance control tower routes sanitise IDs, budgets, auto-assign payloads, and date filters. 【290e18†L1-L20】 |
| 09 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose searchRoutes.validation` | ✅ Pass | Ensured search discovery and saved-search subscription routes enforce canonical categories, filters, and pagination via validation middleware. 【4ede16†L1-L19】 |
| 08 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose adminRoutes.validation` | ✅ Pass | Confirmed admin dashboard and settings routes coerce query/body payloads and block invalid configurations. 【159616†L1-L14】 |
| 08 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose authRoutes.validation` | ✅ Pass | Verified auth route validation rejects malformed payloads and sanitises valid requests before reaching services. 【9d8cf3†L1-L13】 |
| 07 Apr 2024 | `npm test -- runtimeObservabilityService` | ✅ Pass | Validated runtime snapshot aggregation with SQLite sync warnings noted for TEXT columns. |
| 07 Apr 2024 | `npm test -- rateLimitMetrics` | ✅ Pass | Confirmed rate-limit metrics history, blocked ratios, and window rollovers; same SQLite warning observed. |
| 08 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose authRoutes.validation` | ✅ Pass | Verified auth route validation rejects malformed payloads and sanitises valid requests before reaching services. 【9d8cf3†L1-L13】 |
| 08 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose adminRoutes.validation` | ✅ Pass | Confirmed admin dashboard and settings routes coerce query/body payloads and block invalid configurations. 【159616†L1-L14】 |
| 09 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose searchRoutes.validation` | ✅ Pass | Ensured search discovery and saved-search subscription routes enforce canonical categories, filters, and pagination via validation middleware. 【4ede16†L1-L19】 |
| 09 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose projectRoutes.validation financeRoutes.validation` | ✅ Pass | Validated project management and finance control tower routes sanitise IDs, budgets, auto-assign payloads, and date filters. 【290e18†L1-L20】 |
| 10 Apr 2024 | `npm test -- complianceService.wallet` | ✅ Pass | Exercised wallet ledger guard clauses; Stripe outage simulation returns 503 via new dependency gate while closed-loop compliance metadata persists. 【045f7d†L1-L27】 |
| 11 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand --verbose tests/services/authService.refresh.test.js tests/lifecycle/databaseLifecycle.test.js tests/routes/authRoutes.validation.test.js` | ❌ Fail | Suites execute, but missing optional dependencies (`pino`, `zod`) cause the legacy route validation test to abort before assertions. New tests remain for CI coverage where modules are available. |
| 12 Apr 2024 | `LOG_LEVEL=silent NODE_OPTIONS=--experimental-vm-modules npx jest --runInBand tests/config/httpSecurity.test.js` | ✅ Pass | Validated allowed-origin parsing, wildcard handling, perimeter telemetry recording, and security audit logging for the HTTP security middleware. |

> SQLite emits the expected warning about `TEXT` column options during in-memory sync (`tests/setupTestEnv.js`); no functional regressions detected.
